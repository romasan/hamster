{"version":3,"sources":["src/helpers.ts","src/animatedLink.ts","projects/index.ts"],"names":[],"mappings":"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","file":"projects.59ea4205.js","sourceRoot":"..","sourcesContent":["export const render = (callback, start?, frame?) => {\n  if (!start) {\n    start = Date.now()\n  }\n  if (!frame) {\n    frame = 0\n  }\n  if (callback(Date.now() - start, ++frame)) {\n    requestAnimationFrame(() => render(callback, start, frame))\n  }\n}\n\nexport const pick = (source, keys: string[]) =>\n  keys.reduce(\n    (obj, key) => ({\n      ...obj,\n      [key]: source[key],\n    }),\n    {}\n  )\n\nexport const calcAge = (birthday) => new Date(Date.now() - birthday).getUTCFullYear() - 1970\n","import { render, pick } from './helpers'\n\nconst STEP = 80\n\nexport const animatedLink = (link, gurgle?) => {\n  const canvas = document.querySelector('#canvas') as HTMLElement\n  const rects = link.getClientRects()[0]\n  const el = document.createElement('div')\n  canvas.appendChild(el)\n  if (gurgle) {\n    document.location = link.href\n  }\n  el.classList.add(gurgle ? 'link-cover-second' : 'link-cover')\n  setTimeout(() => {\n    el.remove()\n  }, 2000)\n  Object.entries(pick(rects, ['left', 'top', 'width', 'height'])).forEach(\n    ([key, value]) => (el.style[key] = `${Math.ceil(Number(value))}px`)\n  )\n  const margins = [screen.height, screen.width]\n  const margin = Math.max(...margins)\n  const stepWidth = STEP\n  const steps = Math.ceil(margin / stepWidth)\n  const sleep = 1\n  const width = el.style.width\n  const height = el.style.height\n\n  let step = 0\n  let prev = 0\n  let counter = 0\n\n  render((time, _step) => {\n    if (prev === 0) {\n      prev = time\n    }\n    counter += time - prev\n    if (counter > sleep) {\n      counter = 0\n      step += 1\n    }\n    const padding = step * stepWidth\n    el.style.transform = `translate(-${padding}px, -${padding}px)`\n    el.style.width = `${parseInt(width) + padding * 2}px`\n    el.style.height = `${parseInt(height) + padding * 2}px`\n    if (step >= steps - 1) {\n      if (!gurgle) {\n        animatedLink(link, true)\n      }\n      return false\n    }\n    return true\n  })\n}\n","import { render } from '../src/helpers'\nimport { animatedLink } from '../src/animatedLink'\n\nconst projectsMain = () => {\n  const canvas = document.querySelector('#timeline') as HTMLElement\n  const list = canvas.innerText\n    .split('\\n')\n    .filter(Boolean)\n    .map((line) => {\n      const el = document.createElement('div')\n      switch (line[0]) {\n        case '+':\n          el.classList.add('item-year')\n          el.innerText = line.slice(2)\n          return el\n        case '-':\n          el.classList.add('item-header')\n          el.innerText = line.slice(2)\n          return el\n        case '|':\n          el.classList.add('item-content')\n          // parse links\n          el.innerHTML = line.slice(2)\n          return el\n      }\n    })\n    .filter(Boolean)\n\n  canvas.innerText = ''\n  list.forEach((item) => {\n    if (item) {\n      canvas.appendChild(item)\n    }\n  })\n\n  const elements = document.querySelectorAll('a')\n  elements.forEach((link) => {\n    link.addEventListener('click', (event) => {\n      event.preventDefault()\n      animatedLink(event.target)\n    })\n  })\n\n  const sleep = 10\n  let index = -1\n\n  render((time) => {\n    const next = Math.floor(time / sleep)\n    if (next !== index) {\n      for (let i = index; i <= next; i++) {\n        list[list.length - 1 - i]?.style.display = 'block'\n      }\n      index = next\n    }\n    const finish = list.length * sleep\n    if (time < finish) {\n      return true\n    }\n    canvas.classList.remove('loading')\n    return false\n  })\n}\n\ndocument.addEventListener('DOMContentLoaded', projectsMain)\n"]}