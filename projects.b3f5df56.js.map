{"version":3,"sources":["src/helpers.ts","src/animatedLink.ts","projects/index.ts"],"names":[],"mappings":"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","file":"projects.b3f5df56.js","sourceRoot":"..","sourcesContent":["export const render = (callback, start?, frame?) => {\n  if (!start) {\n    start = Date.now()\n  }\n  if (!frame) {\n    frame = 0\n  }\n  if (callback(Date.now() - start, ++frame)) {\n    requestAnimationFrame(() => render(callback, start, frame))\n  }\n}\n\nexport const pick = (source, keys: string[]) =>\n  keys.reduce(\n    (obj, key) => ({\n      ...obj,\n      [key]: source[key],\n    }),\n    {}\n  )\n\nexport const calcAge = (birthday) => new Date(Date.now() - birthday).getUTCFullYear() - 1970\n\nexport const debounce = (callback: () => void, delay?: number, timer?: number) => (...args) => {\n  clearTimeout(timer);\n  timer = setTimeout(() => callback(...args), delay || 100);\n}\n\nconst events = {}\n\nexport const on = (event, callback) => {\n  events[event] = [...(events[event] || []), callback]\n}\n\nexport const emit = (event, payload) => {\n  events[event]?.forEach((callback) => callback(payload))\n}\n","import { render, pick } from './helpers'\n\nconst STEP = 80\n\nexport const animatedLink = (link, gurgle?) => {\n  const canvas = document.querySelector('#canvas') as HTMLElement\n  const rects = link.getClientRects()[0]\n  const el = document.createElement('div')\n  canvas.appendChild(el)\n  if (gurgle) {\n    localStorage.setItem('link', Date.now())\n    document.location = link.href\n  }\n  el.classList.add(gurgle ? 'link-cover-second' : 'link-cover')\n  setTimeout(() => {\n    el.remove()\n  }, 2000)\n  Object.entries(pick(rects, ['left', 'top', 'width', 'height']))\n    .forEach(\n      ([key, value]) => (el.style[key] = `${Math.ceil(Number(key === 'top' ? value + canvas.scrollTop : value))}px`)\n    )\n  const margins = [screen.height, screen.width]\n  const margin = Math.max(...margins)\n  const stepWidth = STEP\n  const steps = Math.ceil(margin / stepWidth)\n  const sleep = 1\n  const width = el.style.width\n  const height = el.style.height\n\n  let step = 0\n  let prev = 0\n  let counter = 0\n\n  render((time, _step) => {\n    if (prev === 0) {\n      prev = time\n    }\n    counter += time - prev\n    if (counter > sleep) {\n      counter = 0\n      step += 1\n    }\n    const padding = step * stepWidth\n    el.style.transform = `translate(-${padding}px, -${padding}px)`\n    el.style.width = `${parseInt(width) + padding * 2}px`\n    el.style.height = `${parseInt(height) + padding * 2}px`\n    if (step >= steps - 1) {\n      if (!gurgle) {\n        animatedLink(link, true)\n      }\n      return false\n    }\n    return true\n  })\n}\n","import { render } from '../src/helpers'\nimport { animatedLink } from '../src/animatedLink'\n\nconst parse = (text) => {\n  return text\n    .replace(/([^\\s]+\\.[^\\s]+)/g, url => `<a href=\"https://${url}\">${url.split('/').pop()}</a>`)\n}\n\nconst projectsMain = () => {\n  const canvas = document.querySelector('#timeline') as HTMLElement\n  const list = canvas.innerText\n    .split('\\n')\n    .filter(Boolean)\n    .map((line) => {\n      const el = document.createElement('div')\n      switch (line[0]) {\n        case '+':\n          el.classList.add('item-year')\n          el.innerText = line.slice(2)\n          return el\n        case '-':\n          el.classList.add('item-header')\n          el.innerText = line.slice(2)\n          return el\n        case '|':\n          el.classList.add('item-content')\n          el.innerHTML = parse(line.slice(2))\n          return el\n      }\n    })\n    .filter(Boolean)\n\n  canvas.innerText = ''\n  list.forEach((item) => {\n    if (item) {\n      canvas.appendChild(item)\n    }\n  })\n  canvas.style.display ='block'\n\n  const elements = document.querySelectorAll('a')\n  elements.forEach((link) => {\n    link.addEventListener('click', (event) => {\n      event.preventDefault()\n      animatedLink(event.target)\n    })\n  })\n\n  const sleep = 10\n  let index = -1\n\n  render((time) => {\n    const next = Math.floor(time / sleep)\n    if (next !== index) {\n      for (let i = index; i <= next; i++) {\n        list[list.length - 1 - i]?.style.display = 'block'\n      }\n      index = next\n    }\n    const finish = list.length * sleep\n    if (time < finish) {\n      return true\n    }\n    canvas.classList.remove('loading')\n    return false\n  })\n}\n\ndocument.addEventListener('DOMContentLoaded', projectsMain)\n"]}